# ═══════════════════════════════════════════════════════════════════════════════
# DÉPENDANCES - SYSTÈME RAG HYBRIDE
# Système de questions-réponses sur documents PDF mathématiques
# ═══════════════════════════════════════════════════════════════════════════════

# ───────────────────────────────────────────────────────────────────────────────
# Core - Configuration et utilitaires de base
# ───────────────────────────────────────────────────────────────────────────────
python-dotenv==1.0.1          # Variables d'environnement depuis .env
pyyaml==6.0.1                 # Parsing config.yaml
pydantic==2.5.3               # Validation de données typées
python-dateutil==2.8.2        # Manipulation de dates

# ───────────────────────────────────────────────────────────────────────────────
# Google Drive API - Téléchargement de PDFs
# ───────────────────────────────────────────────────────────────────────────────
google-auth==2.26.2           # Authentification Google
google-auth-oauthlib==1.2.0   # OAuth2 flow pour authentification interactive
google-auth-httplib2==0.2.0   # Transport HTTP pour Google Auth
google-api-python-client==2.112.0  # Client API Google Drive

# ───────────────────────────────────────────────────────────────────────────────
# PDF Extraction - Extraction de texte et formules LaTeX
# ───────────────────────────────────────────────────────────────────────────────
# PyMuPDF (fitz) - Extraction PDF avec préservation LaTeX
PyMuPDF==1.23.21              # Extraction PDF avec préservation LaTeX
pymupdf4llm==0.0.10           # Adapteur PyMuPDF optimisé pour LLM

# Support LaTeX
latex2mathml==3.77.0          # Conversion LaTeX vers MathML (pour affichage web)

# ───────────────────────────────────────────────────────────────────────────────
# Embeddings & Vector Store - Modèles ouverts et base vectorielle
# ───────────────────────────────────────────────────────────────────────────────
# Sentence Transformers - Embeddings
sentence-transformers==2.3.1  # Modèles d'embeddings pré-entraînés
transformers==4.37.2          # Bibliothèque de base Hugging Face
torch==2.2.0                  # PyTorch (backend pour transformers)

# FAISS - Base vectorielle
faiss-cpu==1.7.4              # FAISS pour CPU (recherche vectorielle rapide)

# ───────────────────────────────────────────────────────────────────────────────
# LLM APIs - Modèles pour génération
# ───────────────────────────────────────────────────────────────────────────────
# OpenAI GPT-4o (utilisé en cloud)
openai==1.12.0                # Client API OpenAI GPT

# Mistral local via Ollama (pas de package Python nécessaire, utilise API REST)

# ───────────────────────────────────────────────────────────────────────────────
# LangChain & LangGraph - Orchestration et workflow
# ───────────────────────────────────────────────────────────────────────────────
langchain==0.1.9              # Framework LLM et RAG
langchain-openai==0.0.5       # Intégration OpenAI pour LangChain
langchain-community==0.0.20   # Composants communautaires LangChain
langgraph==0.0.32             # Workflow multi-agent avec graphes

# ───────────────────────────────────────────────────────────────────────────────
# Interface Web - Streamlit
# ───────────────────────────────────────────────────────────────────────────────
streamlit==1.31.1             # Framework interface web
streamlit-extras==0.3.6       # Composants additionnels Streamlit

# ───────────────────────────────────────────────────────────────────────────────
# Visualisation et graphiques
# ───────────────────────────────────────────────────────────────────────────────
plotly==5.19.0                # Graphiques interactifs
altair==5.2.0                 # Graphiques déclaratifs (natif Streamlit)
matplotlib==3.8.3             # Graphiques statiques (backup)

# Visualisation workflow
graphviz==0.20.1              # Génération de graphes (workflow)

# ───────────────────────────────────────────────────────────────────────────────
# Data Processing - Manipulation de données
# ───────────────────────────────────────────────────────────────────────────────
numpy==1.26.4                 # Calcul numérique
pandas==2.2.1                 # Manipulation de DataFrames
scipy==1.12.0                 # Calcul scientifique

# ───────────────────────────────────────────────────────────────────────────────
# Web Search - Recherche web externe
# ───────────────────────────────────────────────────────────────────────────────
duckduckgo-search>=4.0.0      # Recherche web DuckDuckGo

# ───────────────────────────────────────────────────────────────────────────────
# Utilities - Outils divers
# ───────────────────────────────────────────────────────────────────────────────
tqdm==4.66.2                  # Barres de progression
requests==2.31.0              # Requêtes HTTP
httpx==0.26.0                 # Client HTTP async (pour APIs)
aiohttp==3.9.3                # HTTP async (alternatif)

# ───────────────────────────────────────────────────────────────────────────────
# Logging et monitoring
# ───────────────────────────────────────────────────────────────────────────────
colorlog==6.8.2               # Logs colorés dans console
loguru==0.7.2                 # Alternative logger (optionnel)

# Langfuse - Observabilité LLM
langfuse==2.22.0              # Monitoring et tracing LLM

# ───────────────────────────────────────────────────────────────────────────────
# Text Processing - Traitement de texte
# ───────────────────────────────────────────────────────────────────────────────
nltk==3.8.1                   # Natural Language Toolkit
spacy==3.7.4                  # NLP avancé
tiktoken==0.6.0               # Tokenizer OpenAI (compte tokens précis)

# ───────────────────────────────────────────────────────────────────────────────
# Testing - Tests et qualité de code
# ───────────────────────────────────────────────────────────────────────────────
pytest==8.0.1                 # Framework de tests
pytest-cov==4.1.0             # Coverage des tests
pytest-mock==3.12.0           # Mocking pour tests
pytest-asyncio==0.23.5        # Tests async

# ═══════════════════════════════════════════════════════════════════════════════
# INSTALLATION
# ═══════════════════════════════════════════════════════════════════════════════
# pip install -r requirements.txt
#
# Dépendances système:
#   - brew install graphviz  # Pour visualisation workflow
#   - python -m spacy download fr_core_news_sm  # Modèle français pour spaCy
# ═══════════════════════════════════════════════════════════════════════════════
